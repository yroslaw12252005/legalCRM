{% extends 'base.html' %}
{% block content %}
<style>


    .calendar {
    width: 100%;
    border-collapse: collapse;
}

.calendar td {
    border: 1px solid #ddd;
    vertical-align: top;
    height: 120px;
    padding: 5px;
}

.calendar .empty {
    background-color: #f9f9f9;
}

.day-number {
    font-weight: bold;
    margin-bottom: 5px;
}

.event-card {
    background-color: #e3f2fd;
    border-radius: 4px;
    padding: 5px;
    margin-bottom: 5px;
    font-size: 0.9em;
}

.event-card h4 {
    margin: 0 0 5px 0;
    font-size: 1em;
}

.calendar-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
}
</style>
<div class="calendar-nav">
    <a href="?month={{ prev_month }}&year={{ prev_year }}">← Предыдущий месяц</a>
    <h2>{{ month_name }} {{ current_year }}</h2>
    <a href="?month={{ next_month }}&year={{ next_year }}">Следующий месяц →</a>
</div>

<table class="calendar">
    <thead>
        <tr>
            <th>Пн</th>
            <th>Вт</th>
            <th>Ср</th>
            <th>Чт</th>
            <th>Пт</th>
            <th>Сб</th>
            <th>Вс</th>
        </tr>
    </thead>
    <tbody>
        {% for week in month_days %}
        <tr>

            {% for day, weekday in week %}
            <td class="{% if day == 0 %}empty{% else %}day{% endif %}">
                {% if day != 0 %}
                <div class="day-number">{{ day }}</div>
                <div class="events">
                    {% load lower_filter %}
                    {% for event in events_by_day|get_item:day %}
                    <div class="event-card">
                        <h4>{{ event.title }}</h4>
                        <p>Клиент: {{ event.client.name }}</p>
                        <p>Время: {{ event.time }}</p>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}